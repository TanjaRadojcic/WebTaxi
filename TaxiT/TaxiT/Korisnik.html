<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Pink Taxi</title>
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://www.w3schools.com/lib/w3-theme-pink.css">
    <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Open+Sans'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="Korisnik.css">
    <script src="Scripts/jquery-1.10.2.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            let ulogovani = localStorage.getItem("ulogovani");
            let text = "Dobrodošli " + ulogovani + "!";
            let koje = "";
            let trenutniKorisnik = "";

            $.ajax({
                type: 'POST',
                url: '/api/Find',
                data: JSON.stringify(ulogovani),
                contentType: 'application/json; charset=utf-8',
                dataType: 'json',
                success: function (data) {
                    if (data != null) {
                        trenutniKorisnik = data;
                        switch (data.Uloga) {
                            case 0:
                                koje = "musterija";
                                $(".musterija").css("display", "inline");
                                $("#pregledProfilaDivK").css("display", "none");
                                $("#izmenaProfilaDivK").css("display", "none");
                                $("#dodajVoznjuDivK").css("display", "none");
                                $("#tabelaMojeVoznjeK").css("display", "inline");
                                $("#homeK").click();
                                $(".dispecer").css("display", "none");

                                $(".vozac").css("display", "none");
                                break;
                            case 1:
                                koje = "dispecer";
                                $(".musterija").css("display", "none");

                                $(".dispecer").css("display", "inline");
                                $("#pregledProfilaDivD").css("display", "none");
                                $("#izmenaProfilaDivD").css("display", "none");
                                $("#dodajVozacaDivD").css("display", "none");
                                $(".vozac").css("display", "none");
                                break;
                            case 2:
                                koje = "vozac";
                                $(".dispecer").css("display", "none");

                                $(".musterija").css("display", "none");

                                $(".vozac").css("display", "inline");
                                $("#pregledProfilaDivV").css("display", "none");
                                $("#izmenaProfilaDivV").css("display", "none");
                                break;

                        }

                    }

                },
                error: function (errorData) {

                }
            })

            $("#odjavaK").click(function () {
                localStorage.removeItem("ulogovani");
                let koje = "";
                let trenutniKorisnik = "";
                $(location).attr('href', 'Index.html');
            });

            $("#homeK").click(function () {

                $("#pregledProfilaDivK").css("display", "none");
                $("#izmenaProfilaDivK").css("display", "none");
                $("#dodajVoznjuDivK").css("display", "none");

                $.get("/api/Voznja", function (data, status) {
                    let tableOfProducts = "<table border=\"1\" id=\"musterijaVoznje\"><tr><td colspan=\"8\" align=\"center\">Moje voznje</td></tr><tr><td>Datum</td><td>Početna lokacija</td><td>Odredište</td><td>Vozač</td><td>Iznos</td><td>Status</td><td>Komentar</td><td></td></tr>";
                    for (voznja in data) {
                        if (data[voznja].Musterija == trenutniKorisnik.KorisnickoIme) {
                            tableOfProducts += `<tr><td>${data[voznja].Datum}</td><td>${data[voznja].PocetnaLokacija.Adresa.Ulica} ${data[voznja].PocetnaLokacija.Adresa.Broj}</td><td>${data[voznja].Odrediste.Adresa.Ulica} ${data[voznja].Odrediste.Adresa.Broj}</td><td>${data[voznja].Vozac}</td><td>${data[voznja].Iznos}</td>`;


                            switch (data[voznja].Status) {
                                case 0:
                                    tableOfProducts += `<td>Kreirana-Na čekanju</td>`;
                                    break;
                                case 1:
                                    tableOfProducts += `<td>Formirana</td>`;
                                    break;
                                case 2:
                                    tableOfProducts += `<td>U toku</td>`;
                                    break;
                                case 3:
                                    tableOfProducts += `<td>Obrađena</td>`;
                                    break;
                                case 4:
                                    tableOfProducts += `<td>Prihvaćena</td>`;
                                    break;
                                case 5:
                                    tableOfProducts += `<td>Otkazana</td>`;
                                    break;
                                case 6:
                                    tableOfProducts += `<td>Uspešna</td>`;
                                    break;
                                case 7:
                                    tableOfProducts += `<td>Neuspešna</td>`;
                                    break;

                            }

                            if (data[voznja].Komentar.Korisnik == "") {

                                tableOfProducts += `<td>Nema komentara</td>`;
                               // tableOfProducts += `<td><a href="#" id="vidiKomentar${data[voznja].Id}" >Vidi komentar</a></td>`;


                            } else {
                                tableOfProducts += `<td><a href="#" id="vidiKomentar${data[voznja].Id}" >Vidi komentar</a></td>`;
                            }
                            if (data[voznja].Status == 0) {

                                tableOfProducts += `<td>Otkazi voznju</td>`;
                               // tableOfProducts+= "<td>" + '<button id="vidiKomentar' + data[voznja].Id + '"onclick="alert(\"komic\")">Vidi Komentar</button>' + "</td>";
                            } else {
                                tableOfProducts += `<td>izmeni voznju</td></tr>`;
                                onclick=""
                            }
                        }
                    }
                    tableOfProducts += "</table>";
                    $("#tabelaMojeVoznjeK").append(tableOfProducts);
                });


                $("#tabelaMojeVoznjeK").css("display", "inline");


            });

            $("#vidiKomentar0").click(function () { alert("Komentar") });

            $("#pregledProfilaK").click(function () {

                $("#pregledProfilaDivK").css("display", "inline");
                $("#izmenaProfilaDivK").css("display", "none");
                $("#dodajVoznjuDivK").css("display", "none");
                $("#tabelaMojeVoznjeK").css("display", "none");

                $("#korisnickoImeK").text(trenutniKorisnik.KorisnickoIme);
                $("#lozinkaK").text(trenutniKorisnik.Lozinka);
                $("#imeK").text(trenutniKorisnik.Ime);
                $("#prezimeK").text(trenutniKorisnik.Prezime);
                if (trenutniKorisnik.Pol == 0) {
                    let musko = "<i class=\"fa fa-mars w3-xlarge\"></i>";
                    $("#polK").html(musko);
                } else {
                    let zensko = "<i class=\"fa fa-venus w3-xlarge\"></i>";
                    $("#polK").html(zensko);
                }
                $("#jmbgK").html(trenutniKorisnik.JMBG);
                $("#kontaktK").html(trenutniKorisnik.Kontakt);
                $("#emailK").html(trenutniKorisnik.Email);

            });

            $("#izmenaProfilaK").click(function () {

                $("#izmenaProfilaDivK").css("display", "inline");
                $("#pregledProfilaDivK").css("display", "none");
                $("#dodajVoznjuDivK").css("display", "none");
                $("#tabelaMojeVoznjeK").css("display", "none");

                let izmena = "<table class=\"w3-large\" border=1>";
                izmena += " <tr><td>Korisničko ime</td><td><input type=\"text\" name=\"KorisnickoIme\" id=\"korisnickoime\" value=\"" + trenutniKorisnik.KorisnickoIme + "\" required /></td></tr>";
                izmena += " <tr><td>Lozinka</td><td><input type=\"text\" name=\"Lozinka\" id=\"lozinka1\" value=\"" + trenutniKorisnik.Lozinka + "\" required /></td></tr>";
                izmena += " <tr><td>Ime</td><td><input type=\"text\" name=\"Ime\" id=\"ime1\" value=\" " + trenutniKorisnik.Ime + "\" required /></td></tr>";
                izmena += " <tr><td>Prezime</td><td><input type=\"text\" name=\"Prezime\" value=\" " + trenutniKorisnik.Prezime + "\" id=\"prezime1\" required /></td></tr>";

                izmena += " <tr><td>JMBG</td><td><input type=\"text\" name=\"JMBG\" id=\"jmbg1\" pattern=\"[0-9]{13}\" minlength=\"13\" maxlength=\"13\" value=\"" + trenutniKorisnik.JMBG + "\" required /></td></tr>";
                izmena += " <tr><td>Kontakt</td><td><input type=\"text\" name=\"Kontakt\" id=\"kontakt1\" minlength=\"6\" value=\" " + trenutniKorisnik.Kontakt + "\" required /></td></tr>";
                izmena += " <tr><td>Email</td><td><input type=\"email\" name=\"Email\" id=\"email1\" value=\" " + trenutniKorisnik.Email + "\" required /></td></tr></table>";

                $("#tabelaIzmenaK").html(izmena);

            });

            $("#izmeniK").click(function () {
                let korisnik = {
                    Id: trenutniKorisnik.Id,
                    KorisnickoIme: `${$('#korisnickoime').val()}`,
                    Lozinka: `${$('#lozinka1').val()}`,
                    Ime: `${$('#ime1').val()}`,
                    Prezime: `${$('#prezime1').val()}`,
                    Pol: trenutniKorisnik.Pol,
                    JMBG: `${$('#jmbg1').val()}`,
                    Kontakt: `${$('#kontakt1').val()}`,
                    Email: `${$('#email1').val()}`,
                    Voznje: trenutniKorisnik.Voznje,
                    Uloga: trenutniKorisnik.Uloga,
                };

                $.ajax({
                    type: 'PUT',
                    url: '/api/Korisnik/' + trenutniKorisnik.Id,
                    data: JSON.stringify(korisnik),
                    contentType: 'application/json; charset=utf-8',
                    dataType: 'json',
                    success: function (data) {
                        if (data) {
                            alert("Uspesna izmena");
                            localStorage.setItem("ulogovani", korisnik.KorisnickoIme);
                            $(location).attr('href', 'Korisnik.html');
                        }
                        else {
                            alert("Korisnicko ime je zauzeto!");
                        }
                    },
                    error: function (errorData) {

                    }
                })
            });


            $("#PlusK").click(function () {

                $("#izmenaProfilaDivK").css("display", "none");
                $("#pregledProfilaDivK").css("display", "none");
                $("#dodajVoznjuDivK").css("display", "inline");
                $("#tabelaMojeVoznjeK").css("display", "none");

            });

            $("#dodajVoznjuK").click(function () {
                let adresa = {
                    Ulica: `${$('#ulicaK').val()}`,
                    Broj: `${$('#brojK').val()}`,
                    Mesto: `${$('#mestoK').val()}`,
                    Zip: `${$('#zipK').val()}`,
                };
                let lokacija = {
                    X: `${$('#xK').val()}`,
                    Y: `${$('#yK').val()}`,
                    Adresa: adresa,
                };
                let Voznja = {
                    Musterija: trenutniKorisnik.KorisnickoIme,
                    PocetnaLokacija: lokacija,
                    Auto: `${$('#autoK').val()}`,

                };
                $.ajax({
                    type: 'POST',
                    url: '/api/Voznja',
                    data: JSON.stringify(Voznja),
                    contentType: 'application/json; charset=utf-8',
                    dataType: 'json',
                    success: function (data) {
                        if (data) {
                            alert("Dodata voznja");
                            $(location).attr('href', 'Korisnik.html');
                        }
                        else {
                            alert("Voznja nije dodata!");
                        }
                    },
                    error: function (errorData) {

                    }
                })
            });















            $("#odjavaD").click(function () {
                localStorage.removeItem("ulogovani");
                let koje = "";
                let trenutniKorisnik = "";
                $(location).attr('href', 'Index.html');
            });

            $("#homeD").click(function () {

                $("#pregledProfilaDivD").css("display", "none");
                $("#izmenaProfilaDivD").css("display", "none");
                $("#dodajVozacaDivD").css("display", "none");
            });

            $("#pregledProfilaD").click(function () {

                $("#pregledProfilaDivD").css("display", "inline");
                $("#izmenaProfilaDivD").css("display", "none");
                $("#dodajVozacaDivD").css("display", "none");


                $("#korisnickoImeD").text(trenutniKorisnik.KorisnickoIme);
                $("#lozinkaD").text(trenutniKorisnik.Lozinka);
                $("#imeD").text(trenutniKorisnik.Ime);
                $("#prezimeD").text(trenutniKorisnik.Prezime);
                if (trenutniKorisnik.Pol == 0) {
                    let musko = "<i class=\"fa fa-mars w3-xlarge\"></i>";
                    $("#polD").html(musko);
                } else {
                    let zensko = "<i class=\"fa fa-venus w3-xlarge\"></i>";
                    $("#polD").html(zensko);
                }
                $("#jmbgD").html(trenutniKorisnik.JMBG);
                $("#kontaktD").html(trenutniKorisnik.Kontakt);
                $("#emailD").html(trenutniKorisnik.Email);

            });

            $("#izmenaProfilaD").click(function () {

                $("#izmenaProfilaDivD").css("display", "inline");
                $("#pregledProfilaDivD").css("display", "none");
                $("#dodajVozacaDivD").css("display", "none");

                let izmena = "<table class=\"w3-large\" border=1>";
                izmena += " <tr><td>Korisničko ime</td><td><input type=\"text\" name=\"KorisnickoIme\" id=\"korisnickoime\" value=\"" + trenutniKorisnik.KorisnickoIme + "\" required /></td></tr>";
                izmena += " <tr><td>Lozinka</td><td><input type=\"text\" name=\"Lozinka\" id=\"lozinka1\" value=\"" + trenutniKorisnik.Lozinka + "\" required /></td></tr>";
                izmena += " <tr><td>Ime</td><td><input type=\"text\" name=\"Ime\" id=\"ime1\" value=\" " + trenutniKorisnik.Ime + "\" required /></td></tr>";
                izmena += " <tr><td>Prezime</td><td><input type=\"text\" name=\"Prezime\" value=\" " + trenutniKorisnik.Prezime + "\" id=\"prezime1\" required /></td></tr>";

                izmena += " <tr><td>JMBG</td><td><input type=\"text\" name=\"JMBG\" id=\"jmbg1\" pattern=\"[0-9]{13}\" minlength=\"13\" maxlength=\"13\" value=\"" + trenutniKorisnik.JMBG + "\" required /></td></tr>";
                izmena += " <tr><td>Kontakt</td><td><input type=\"text\" name=\"Kontakt\" id=\"kontakt1\" minlength=\"6\" value=\" " + trenutniKorisnik.Kontakt + "\" required /></td></tr>";
                izmena += " <tr><td>Email</td><td><input type=\"email\" name=\"Email\" id=\"email1\" value=\" " + trenutniKorisnik.Email + "\" required /></td></tr></table>";

                $("#tabelaIzmenaD").html(izmena);

            });

            $("#izmeniD").click(function () {
                let korisnik = {
                    Id: trenutniKorisnik.Id,
                    KorisnickoIme: `${$('#korisnickoime').val()}`,
                    Lozinka: `${$('#lozinka1').val()}`,
                    Ime: `${$('#ime1').val()}`,
                    Prezime: `${$('#prezime1').val()}`,
                    Pol: trenutniKorisnik.Pol,
                    JMBG: `${$('#jmbg1').val()}`,
                    Kontakt: `${$('#kontakt1').val()}`,
                    Email: `${$('#email1').val()}`,
                    Voznje: trenutniKorisnik.Voznje,
                    Uloga: trenutniKorisnik.Uloga,
                };

                $.ajax({
                    type: 'PUT',
                    url: '/api/Dispecer/' + trenutniKorisnik.Id,
                    data: JSON.stringify(korisnik),
                    contentType: 'application/json; charset=utf-8',
                    dataType: 'json',
                    success: function (data) {
                        if (data) {
                            alert("Uspesna izmena");
                            localStorage.setItem("ulogovani", korisnik.KorisnickoIme);
                            $(location).attr('href', 'Korisnik.html');
                        }
                        else {
                            alert("Korisnicko ime je zauzeto!");
                        }
                    },
                    error: function (errorData) {

                    }
                })
            });


            $("#PlusD").click(function () {

                $("#izmenaProfilaDivD").css("display", "none");
                $("#pregledProfilaDivD").css("display", "none");
                $("#dodajVozacaDivD").css("display", "inline");

            });
            $("#registracijaV").click(function () {
                let adresa = {
                    Ulica: `${$('#ulicaVD').val()}`,
                    Broj: `${$('#brojVD').val()}`,
                    Mesto: `${$('#mestoVD').val()}`,
                    Zip: `${$('#zipVD').val()}`,
                };
                let lokacija = {
                    X: `${$('#xVD').val()}`,
                    Y: `${$('#yVD').val()}`,
                    Adresa: adresa,
                };
                let automobil = {
                    Godiste: `${$('#godisteVD').val()}`,
                    Registracija: `${$('#regVD').val()}`,
                    BrojVozila: `${$('#brVD').val()}`,
                    TipAutomobila: `${$('#tipAutoVD').val()}`,
                };
                let vozac = {
                    KorisnickoIme: `${$('#korisnickoimeVD').val()}`,
                    Lozinka: `${$('#lozinkaVD').val()}`,
                    Ime: `${$('#imeVD').val()}`,
                    Prezime: `${$('#prezimeVD').val()}`,
                    Pol: `${$('#polVD').val()}`,
                    JMBG: `${$('#jmbgVD').val()}`,
                    Kontakt: `${$('#kontaktVD').val()}`,
                    Email: `${$('#emailVD').val()}`,
                    Lokacija: lokacija,
                    Automobil: automobil,

                };



                $.ajax({
                    type: 'POST',
                    url: '/api/Vozac',
                    data: JSON.stringify(vozac),
                    contentType: 'application/json; charset=utf-8',
                    dataType: 'json',
                    success: function (data) {
                        if (data) {
                            alert("Registrovali ste vozaca");
                            $(location).attr('href', 'Korisnik.html');
                        }
                        else {
                            alert("Korisnicko ime je zauzeto!");
                        }
                    },
                    error: function (errorData) {

                    }
                })
            });














            $("#odjavaV").click(function () {
                localStorage.removeItem("ulogovani");
                let koje = "";
                let trenutniKorisnik = "";
                $(location).attr('href', 'Index.html');
            });

            $("#homeV").click(function () {

                $("#pregledProfilaDivV").css("display", "none");
                $("#izmenaProfilaDivV").css("display", "none");
                
            });

            $("#pregledProfilaV").click(function () {

                $("#pregledProfilaDivV").css("display", "inline");
                $("#izmenaProfilaDivV").css("display", "none");
               


                $("#korisnickoImeV").text(trenutniKorisnik.KorisnickoIme);
                $("#lozinkaV").text(trenutniKorisnik.Lozinka);
                $("#imeV").text(trenutniKorisnik.Ime);
                $("#prezimeV").text(trenutniKorisnik.Prezime);
                if (trenutniKorisnik.Pol == 0) {
                    let musko = "<i class=\"fa fa-mars w3-xlarge\"></i>";
                    $("#polV").html(musko);
                } else {
                    let zensko = "<i class=\"fa fa-venus w3-xlarge\"></i>";
                    $("#polV").html(zensko);
                }
                $("#jmbgV").html(trenutniKorisnik.JMBG);
                $("#kontaktV").html(trenutniKorisnik.Kontakt);
                $("#emailV").html(trenutniKorisnik.Email);
                $("#lokacijaV").html(trenutniKorisnik.Lokacija.Adresa.Ulica + " " + trenutniKorisnik.Lokacija.Adresa.Broj);
                if (trenutniKorisnik.Automobil.TipAutomobila == 0) {
                    $("#automobilV").html("Putnički");
                } else {
                    $("#automobilV").html("Kombi");
                }
               

            });

            $("#izmenaProfilaV").click(function () {

                $("#izmenaProfilaDivV").css("display", "inline");
                $("#pregledProfilaDivV").css("display", "none");
                

                let izmena = "<table class=\"w3-large\" border=1>";
                izmena += " <tr><td>Korisničko ime</td><td><input type=\"text\" name=\"KorisnickoIme\" id=\"korisnickoime\" value=\"" + trenutniKorisnik.KorisnickoIme + "\" required /></td></tr>";
                izmena += " <tr><td>Lozinka</td><td><input type=\"text\" name=\"Lozinka\" id=\"lozinka1\" value=\"" + trenutniKorisnik.Lozinka + "\" required /></td></tr>";
                izmena += " <tr><td>Ime</td><td><input type=\"text\" name=\"Ime\" id=\"ime1\" value=\" " + trenutniKorisnik.Ime + "\" required /></td></tr>";
                izmena += " <tr><td>Prezime</td><td><input type=\"text\" name=\"Prezime\" value=\" " + trenutniKorisnik.Prezime + "\" id=\"prezime1\" required /></td></tr>";

                izmena += " <tr><td>JMBG</td><td><input type=\"text\" name=\"JMBG\" id=\"jmbg1\" pattern=\"[0-9]{13}\" minlength=\"13\" maxlength=\"13\" value=\"" + trenutniKorisnik.JMBG + "\" required /></td></tr>";
                izmena += " <tr><td>Kontakt</td><td><input type=\"text\" name=\"Kontakt\" id=\"kontakt1\" minlength=\"6\" value=\" " + trenutniKorisnik.Kontakt + "\" required /></td></tr>";
                izmena += " <tr><td>Email</td><td><input type=\"email\" name=\"Email\" id=\"email1\" value=\" " + trenutniKorisnik.Email + "\" required /></td></tr>";
                izmena += " <tr><td colspan=\"2\">Lokacija</td></tr><tr><td>X</td><td><input type=\"number\" name=\"X\" id=\"xV\" value=\"" + trenutniKorisnik.Lokacija.X + "\" required /></td ></tr > ";
                izmena += " <tr><td>Y</td><td><input type=\"number\" name=\"Y\" id=\"yV\" value=\"" + trenutniKorisnik.Lokacija.Y + "\" required /></td ></tr >";
                izmena += " <tr><td colspan=\"2\">Adresa</td></tr><tr><td>Ulica</td><td><input type=\"text\" name=\"Ulica\" id=\"ulicaV\" value=\"" + trenutniKorisnik.Lokacija.Adresa.Ulica + "\" required /></td ></tr >";
                izmena += " <tr><td>Broj</td><td><input type=\"text\" name=\"Broj\" id=\"brojV\" value=\"" + trenutniKorisnik.Lokacija.Adresa.Broj + "\" required /></td ></tr>";
                izmena += " <tr><td>Mesto</td><td><input type=\"text\" name=\"Mesto\" id=\"mestoV\" value=\"" + trenutniKorisnik.Lokacija.Adresa.Mesto + "\" required /></td ></tr>";
                izmena += " <tr><td>ZIP</td><td><input type=\"number\" name=\"Zip\" id=\"zipV\" pattern=\"[0-9]{5}\" minlength=\"5\" maxlength=\"5\" value=\"" + trenutniKorisnik.Lokacija.Adresa.Zip + "\" required /></td></tr>";
                izmena += " <tr><td colspan=\"2\">Automobil</td></tr>";
                izmena += " <tr><td>Godište</td><td><input type=\"number\" name=\"Godiste\" id=\"godisteV\" value=\"" + trenutniKorisnik.Automobil.Godiste + "\" required/></td></tr>";
                izmena += " <tr><td>Registracija</td><td><input type=\"text\" name=\"Registracija\" id=\"regV\" value=\"" + trenutniKorisnik.Automobil.Registracija + "\" required /></td></tr>";
                izmena += " <tr><td>Broj Vozila</td><td><input type=\"number\" name=\"BrojVozila\" id=\"brV\" value=\"" + trenutniKorisnik.Automobil.BrojVozila + "\" required /></td></tr>";

                izmena += " <tr><td>Tip</td><td><select name=\"TipAutomobila\" id=\"tipAutoV\"><option>Putnički</option><option>Kombi</option></select></td></tr></table>";

                $("#tabelaIzmenaV").html(izmena);

            });

            $("#izmeniV").click(function () {
                let adresa = {
                    Ulica: `${$('#ulicaV').val()}`,
                    Broj: `${$('#brojV').val()}`,
                    Mesto: `${$('#mestoV').val()}`,
                    Zip: `${$('#zipV').val()}`,
                };
                let lokacija = {
                    X: `${$('#xV').val()}`,
                    Y: `${$('#yV').val()}`,
                    Adresa: adresa,
                };
                
                let automobil = {
                    Godiste: `${$('#godisteV').val()}`,
                    Registracija: `${$('#regV').val()}`,
                    BrojVozila: `${$('#brV').val()}`,
                    TipAutomobila: `${$('#tipAutoV').val()}`,
                };

                let korisnik = {
                    Id: trenutniKorisnik.Id,
                    KorisnickoIme: `${$('#korisnickoime').val()}`,
                    Lozinka: `${$('#lozinka1').val()}`,
                    Ime: `${$('#ime1').val()}`,
                    Prezime: `${$('#prezime1').val()}`,
                    Pol: trenutniKorisnik.Pol,
                    JMBG: `${$('#jmbg1').val()}`,
                    Kontakt: `${$('#kontakt1').val()}`,
                    Email: `${$('#email1').val()}`,
                    Voznje: trenutniKorisnik.Voznje,
                    Uloga: trenutniKorisnik.Uloga,
                    Lokacija: lokacija,
                    Automobil: automobil,
                };

                $.ajax({
                    type: 'PUT',
                    url: '/api/Vozac/' + trenutniKorisnik.Id,
                    data: JSON.stringify(korisnik),
                    contentType: 'application/json; charset=utf-8',
                    dataType: 'json',
                    success: function (data) {
                        if (data) {
                            alert("Uspesna izmena");
                            localStorage.setItem("ulogovani", korisnik.KorisnickoIme);
                            $(location).attr('href', 'Korisnik.html');
                        }
                        else {
                            alert("Korisnicko ime je zauzeto!");
                        }
                    },
                    error: function (errorData) {

                    }
                })
            });












        });
    </script>
</head>
<body>
    <div class="musterija">
        <div class="w3-top">
            <div class="w3-bar " style=" background-color:#f176ad">
                <img class="w3-bar-item w3-left w3-small " src="logo.jpg" height="60" width="60" />
                <a href="#" id="homeK" class="w3-bar-item w3-button w3-padding-large w3-large w3-left " style=" background-color:#ee1790"><i class="fa fa-home"></i></a>
                <div class="w3-dropdown-hover w3-hide-small w3-large w3-left">
                    <button class="w3-button w3-padding-large" title="Account"><i class="fa fa-user"></i></button>
                    <div class="w3-dropdown-content w3-card-4 w3-bar-block" style="width:300px">
                        <a href="#" id="pregledProfilaK" class="w3-bar-item w3-button">Pregled profila</a>
                        <a href="#" id="izmenaProfilaK" class="w3-bar-item w3-button">Izmeni profil</a>
                        <a href="#" id="odjavaK" class="w3-bar-item w3-button">Odjavi se</a>

                    </div>
                </div>
                <a href="#" id="PlusK" class="w3-bar-item w3-button w3-padding-large w3-large w3-left" title="Nova vožnja"><i class="fa fa-plus"></i></a>
            </div>
        </div>

        <div class="w3-container w3-content" style="max-width:1700px;margin-top:80px">
            <div id="pregledProfilaDivK">
                <div class="w3-card w3-left w3-padding-large">
                    <h5 id="korisnickoImeK" class="fa fa-user-circle w3-xxlarge"></h5>
                    <br />
                    <p id="lozinkaK" class="fa fa-key w3-xlarge"></p><br />
                    <p id="imeK" class="fa fa-genderless w3-xlarge"></p><br />
                    <p id="prezimeK" class="fa fa-genderless w3-xlarge"></p><br />
                    <p id="polK"></p>
                    <p id="jmbgK" class="fa fa-birthday-cake w3-xlarge"></p><br />
                    <p id="kontaktK" class="fa fa-phone w3-xlarge"></p><br />
                    <p id="emailK" class="fa fa-at w3-xlarge"></p><br />
                    </div>
                </div>

                <div id="izmenaProfilaDivK">
                    <div id="tabelaIzmenaK">

                    </div>
                    <button id="izmeniK" type="button">Izmeni</button>
                </div>

                <!--nije gotovo-->
                <div id="dodajVoznjuDivK">
                    <div id="tabelaDodajVoznju">
                        <table border="1">
                            <tr><td colspan="2">Vaša lokacija</td></tr>
                            <tr><td>X</td><td><input type="number" name="X" id="xK" required /></td></tr>
                            <tr><td>Y</td><td><input type="number" name="Y" id="yK" required /></td></tr>
                            <tr><td colspan="2">Adresa</td></tr>
                            <tr><td>Ulica</td><td><input type="text" name="Ulica" id="ulicaK" required /></td></tr>
                            <tr><td>Broj</td><td><input type="text" name="Broj" id="brojK" required /></td></tr>
                            <tr><td>Mesto</td><td><input type="text" name="Mesto" id="mestoK" required /></td></tr>
                            <tr><td>ZIP</td><td><input type="number" name="Zip" id="zipK" required /></td></tr>
                            <tr>
                                <td>Tip Automobila</td>
                                <td>
                                    <select name="Auto" id="autoK">
                                        <option>Putnički</option>
                                        <option>Kombi</option>
                                    </select>
                                </td>
                            </tr>
                            <tr><td colspan="2"><button id="dodajVoznjuK" type="button">Dodaj</button></td></tr>
                        </table>
                    </div>
                    
                </div>
                <!--nije gotovo-->
                <div id="tabelaMojeVoznjeK">
                    
                </div>

            </div>

    </div>

    <div class="vozac">
        <div class="w3-top">
            <div class="w3-bar " style=" background-color:#f176ad">
                <img class="w3-bar-item w3-left w3-small " src="logo.jpg" height="60" width="60" />
                <a href="#" id="homeV" class="w3-bar-item w3-button w3-padding-large w3-large w3-left " style=" background-color:#ee1790"><i class="fa fa-home"></i></a>
                <div class="w3-dropdown-hover w3-hide-small w3-large w3-left">
                    <button class="w3-button w3-padding-large" title="Account"><i class="fa fa-user"></i></button>
                    <div class="w3-dropdown-content w3-card-4 w3-bar-block" style="width:300px">
                        <a href="#" id="pregledProfilaV" class="w3-bar-item w3-button">Pregled profila</a>
                        <a href="#" id="izmenaProfilaV" class="w3-bar-item w3-button">Izmeni profil</a>
                        <a href="#" id="odjavaV" class="w3-bar-item w3-button">Odjavi se</a>

                    </div>
                </div>
            </div>
        </div>
        <div class="w3-container w3-content" style="max-width:1700px;margin-top:80px">
            <div id="pregledProfilaDivV">
                <div class="w3-card w3-left w3-padding-large">
                    <h5 id="korisnickoImeV" class="fa fa-user-circle w3-xxlarge"></h5>
                    <br />
                    <p id="lozinkaV" class="fa fa-key w3-xlarge"></p><br />
                    <p id="imeV" class="fa fa-genderless w3-xlarge"></p><br />
                    <p id="prezimeV" class="fa fa-genderless w3-xlarge"></p><br />
                    <p id="polV"></p>
                    <p id="jmbgV" class="fa fa-birthday-cake w3-xlarge"></p><br />
                    <p id="kontaktV" class="fa fa-phone w3-xlarge"></p><br />
                    <p id="emailV" class="fa fa-at w3-xlarge"></p><br />
                    <p id="lokacijaV" class="fa fa-map-marker w3-xlarge"></p><br />
                    <p id="automobilV" class="fa fa-car w3-xlarge"></p><br />
                    </div>
                </div>

                <div id="izmenaProfilaDivV">
                    <div id="tabelaIzmenaV">

                    </div>
                    <button id="izmeniV" type="button">Izmeni</button>
                </div>
            </div>

        </div>

        <div class="dispecer">
            <div class="w3-top">
                <div class="w3-bar " style=" background-color:#f176ad">
                    <img class="w3-bar-item w3-left w3-small " src="logo.jpg" height="60" width="60" />
                    <a href="#" id="homeD" class="w3-bar-item w3-button w3-padding-large w3-large w3-left " style=" background-color:#ee1790"><i class="fa fa-home"></i></a>
                    <div class="w3-dropdown-hover w3-hide-small w3-large w3-left">
                        <button class="w3-button w3-padding-large" title="Account"><i class="fa fa-user"></i></button>
                        <div class="w3-dropdown-content w3-card-4 w3-bar-block" style="width:300px">
                            <a href="#" id="pregledProfilaD" class="w3-bar-item w3-button">Pregled profila</a>
                            <a href="#" id="izmenaProfilaD" class="w3-bar-item w3-button">Izmeni profil</a>
                            <a href="#" id="odjavaD" class="w3-bar-item w3-button">Odjavi se</a>

                        </div>
                    </div>
                    <a href="#" id="PlusD" class="w3-bar-item w3-button w3-padding-large w3-large w3-left" title="Dodaj Vozača"><i class="fa fa-plus"></i></a>
                </div>
            </div>

            <div class="w3-container w3-content" style="max-width:1700px;margin-top:80px">
                <div id="pregledProfilaDivD">

                    <div class="w3-card w3-left w3-padding-large">
                        <h5 id="korisnickoImeD" class="fa fa-user-circle w3-xxlarge w3-center"></h5><br />
                        <p id="lozinkaD" class="fa fa-key w3-xlarge"></p><br />
                        <p id="imeD" class="fa fa-genderless w3-xlarge"></p><br />
                        <p id="prezimeD" class="fa fa-genderless w3-xlarge"></p><br />
                        <p id="polD"></p>
                        <p id="jmbgD" class="fa fa-birthday-cake w3-xlarge"></p><br />
                        <p id="kontaktD" class="fa fa-phone w3-xlarge"></p><br />
                        <p id="emailD" class="fa fa-at w3-xlarge"></p><br />
                    </div>
                    

                </div>

                <div id="izmenaProfilaDivD">
                    <div id="tabelaIzmenaD">

                    </div>
                    <button id="izmeniD" type="button">Izmeni</button>
                </div>

                <div id="dodajVozacaDivD">
                    <table class="w3-large" border="1">
                        <tr><td colspan="2" align="center"> Registracija Vozača</td></tr>
                        <tr><td>Korisničko ime</td><td><input type="text" name="KorisnickoIme" id="korisnickoimeVD" required /></td></tr>
                        <tr><td>Lozinka</td><td><input type="password" name="Lozinka" id="lozinkaVD" required /></td></tr>
                        <tr><td>Ime</td><td> <input type="text" name="Ime" id="imeVD" required /> </td> </tr>
                        <tr> <td>Prezime</td><td> <input type="text" name="Prezime" id="prezimeVD" required /> </td></tr>
                        <tr><td> Pol </td><td><select name="Pol" id="polVD"><option>Muški</option><option>Ženski</option></select></td></tr>
                        <tr> <td> JMBG</td> <td><input type="text" name="JMBG" id="jmbgVD" pattern="[0-9]{13}" minlength="13" maxlength="13" required /></td></tr>
                        <tr><td> Kontakt</td> <td><input type="text" name="Kontakt" id="kontaktVD" minlength="6" required /> </td> </tr>
                        <tr><td> Email </td> <td> <input type="email" name="Email" id="emailVD" required /></td></tr>
                        <tr><td colspan="2">Lokacija</td></tr>
                        <tr><td>X</td><td><input type="number" name="X" id="xVD" required /></td></tr>
                        <tr><td>Y</td><td><input type="number" name="Y" id="yVD" required /></td></tr>
                        <tr><td colspan="2">Adresa</td></tr>
                        <tr><td>Ulica</td><td><input type="text" name="Ulica" id="ulicaVD" required /></td></tr>
                        <tr><td>Broj</td><td><input type="text" name="Broj" id="brojVD" required /></td></tr>
                        <tr><td>Mesto</td><td><input type="text" name="Mesto" id="mestoVD" required /></td></tr>
                        <tr><td>ZIP</td><td><input type="number" name="Zip" id="zipVD" required /></td></tr>
                        <tr><td colspan="2">Automobil</td></tr>
                        <tr><td>Godište</td><td><input type="number" name="Godiste" id="godisteVD" required /></td></tr>
                        <tr><td>Registracija</td><td><input type="text" name="Registracija" id="regVD" required /></td></tr>
                        <tr><td>Broj Vozila</td><td><input type="number" name="BrojVozila" id="brVD" required /></td></tr>
                        <tr><td>Tip</td><td><select name="TipAutomobila" id="tipAutoVD"><option selected>Putnički</option><option>Kombi</option></select></td></tr>

                        <tr><td colspan="2"><button id="registracijaV" type="button">Registruj</button></td></tr>
                    </table>
                </div>

            </div>
        </div>

</body>
</html>
